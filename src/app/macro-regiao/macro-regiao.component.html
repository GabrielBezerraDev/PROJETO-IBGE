<div class="page">
  <div class="card" *ngFor="let regiao of macroRegiaoCard">
    <h2 class="font">Checar as estatística da região {{regiao.nome}}</h2>
    <hr>
    <mat-accordion>
      <form [formGroup]="formIBGE">
        <mat-expansion-panel hideToggle>
            <mat-expansion-panel-header>
              <mat-panel-title>
                This is the expansion title
              </mat-panel-title>
              <mat-panel-description>
                This is a summary of the content
              </mat-panel-description>
            </mat-expansion-panel-header>

            <input formControlName="regiao" hidden [value]="regiao.id">

            <mat-form-field class="example-full-width">
              <mat-label>Favorite food</mat-label>
              <input matInput formControlName="teste" (input)="teste()">
            </mat-form-field>

            <mat-form-field>
              <mat-label>Selecione o agregado</mat-label>
              <mat-select formControlName="agregado" (selectionChange)="setProblemas()">
                <mat-option [disabled]="formIBGE.get('agregado')?.valid ? false : true" [value]="" >
                  Selecione um valor
                </mat-option>
                <mat-option *ngFor="let pesquisa of pesquisas" [value]="pesquisa.agregados">
                  {{pesquisa.nome}}
                </mat-option>
              </mat-select>
            </mat-form-field>


          <mat-form-field>
            <mat-label>Selecione problema</mat-label>
            <mat-select formControlName="problema" [disabled]="formIBGE.get('agregado')?.valid ? false : true">
              <!-- <mat-option *ngFor="let pesquisa of convertArray(formIBGE.get('problema')?.value)" >
                {{pesquisa}}
              </mat-option> -->
            </mat-select>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Favorite food</mat-label>
            <mat-select formControlName="estado">
            </mat-select>
          </mat-form-field>

        </mat-expansion-panel>
      </form>
      <mat-expansion-panel (opened)="panelOpenState = true"
                           (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Self aware panel
          </mat-panel-title>
          <mat-panel-description>
            Currently I am {{panelOpenState ? 'open' : 'closed'}}
          </mat-panel-description>
        </mat-expansion-panel-header>
        <p>I'm visible because I am open</p>
      </mat-expansion-panel>
    </mat-accordion>

  </div>
</div>

